---
import "~/components/Reel.css";
interface Props {
  url: string;
  href: string;
  title: string;
  watchedDate: string;
  album?: string;
  vote_average?: number;
  vote_count?: number;
  artist?: string;
  type: "movie" | "song";
}
const {
  url,
  title,
  watchedDate,
  href,
  vote_average,
  album,
  type,
  artist,
} = Astro.props;

const missingThumbnail =
  type === "movie"
    ? "https://placeholder.pics/svg/178x278/1a1b26/8a8a8e/No%20Poster"
    : "https://placeholder.pics/svg/185x185/1a1b26/8a8a8e/No%20Cover";

const formattedDate = new Date(watchedDate).toLocaleDateString("en-us", {
  month: "short",
  day: "numeric",
});
---

<div class:list={["Reel", type]}>
  <a href={href} target="_blank" rel="noopener noreferrer">
    <div class="thumbnail">
      <img
        src={url !== "" ? url : missingThumbnail}
        alt={title}
        loading="lazy"
      />
      {vote_average && (
        <span class="vote">{vote_average.toFixed(1)}</span>
      )}
    </div>
  </a>
  <div class="info">
    <h3 class="reel-title">{title}</h3>
    {artist && <p class="reel-artist">{artist}</p>}
    {album && <p class="reel-album">{album}</p>}
    <p class="reel-date">{formattedDate}</p>
  </div>
</div>
