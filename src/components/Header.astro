---
import { Image } from "astro:assets";
import HeaderLink from "~/components/HeaderLink.astro";
import "~/components/Header.css";

const currentPath = Astro.url.pathname;
const isEn = currentPath.startsWith('/en');
const otherLang = isEn ? 'IT' : 'EN';
const langSwitchHref = isEn
  ? currentPath.replace(/^\/en/, '') || '/'
  : `/en${currentPath}`;
---

<header class="Header">
  <div class="logo-container">
    <HeaderLink href="/" class="logo">
      <Image src="/img/me.jpg" alt="Logo Valerio Narcisi" width={32} height={32} loading="eager" />
      <div>Valerio Narcisi</div>
    </HeaderLink>
  </div>
  <div class="header-controls">
    <div class="menu-toggle">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>
  <nav>
    <HeaderLink href={isEn ? "/en" : "/"}>Home</HeaderLink>
    <HeaderLink href={isEn ? "/en/blog" : "/blog"}>Blog</HeaderLink>
    <HeaderLink href={isEn ? "/en/films" : "/films"}>{isEn ? "Films" : "Film"}</HeaderLink>
    <HeaderLink href={isEn ? "/en/who-i-am" : "/who-i-am"}>{isEn ? "Who I Am" : "Chi Sono"}</HeaderLink>
    <a href={langSwitchHref} class="lang-switch">{otherLang}</a>
  </nav>
</header>

<script>
  const menuToggle = document.querySelector(".menu-toggle");
  const nav = document.querySelector("nav");

  menuToggle?.addEventListener("click", () => {
    menuToggle.classList.toggle("active");
    nav?.classList.toggle("active");
  });
</script>
