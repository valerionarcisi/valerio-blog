---
import AstroLayout from "../layouts/layout.astro";
import Home from "../components/Home/Home";
import type { TPostAbstract } from "../models/model";

const query = {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    query: `{
      posts(orderBy: createdAt_DESC) {
        id,
        title,
        slug,
        date,
        coverImage {
          id,
          url,
          fileName,
        }
      }
    }
  `,
  }),
};

const response = await fetch(import.meta.env.HYGRAPH_ENDPOINT, query);
const json = await response.json();
const posts: TPostAbstract[] = json.data.posts;
---

<AstroLayout>
  <Home posts={posts} />
</AstroLayout>
../models/model