---
import BaseHead from "~/components/BaseHead.astro";
import Header from "~/components/Header.astro";
import Footer from "~/components/Footer.astro";
import Title from "~/components/Title.astro";
import FilmTimeline from "~/components/FilmTimeline.astro";
import { getCollection } from "astro:content";
import { SITE_TITLE } from "~/consts";
import { getLangFromId } from "~/i18n/utils";

const allFilms = await getCollection("films");
const films = allFilms
  .filter(e => getLangFromId(e.id) === "en")
  .sort((a, b) => a.data.sortOrder - b.data.sortOrder);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={`Films | ${SITE_TITLE}`} description="Short films by Valerio Narcisi" />
  </head>
  <body>
    <Header />
    <main>
      <Title title="Films" />
      <FilmTimeline lang="en" films={films} festivalLabel="festivals" />
    </main>
    <Footer />
  </body>
</html>
