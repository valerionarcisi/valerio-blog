---
import Blog from '~/layouts/Blog.astro';
import { getCollection } from 'astro:content';
import { getLangFromId, getSlugFromId } from '~/i18n/utils';

const allEntries = await getCollection('blog');
const posts = allEntries
  .filter(e => getLangFromId(e.id) === 'en')
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
  .map(e => ({
    ...e.data,
    slug: getSlugFromId(e.id),
  }));
---

<Blog category="Blog" posts={posts} lang="en" />
